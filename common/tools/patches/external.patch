diff --git a/external/wpa_supplicant_8/hostapd/Android.mk b/external/wpa_supplicant_8/hostapd/Android.mk
index f687c4d..4d482ef 100644
--- a/external/wpa_supplicant_8/hostapd/Android.mk
+++ b/external/wpa_supplicant_8/hostapd/Android.mk
@@ -906,7 +906,7 @@ LOCAL_C_INCLUDES := $(INCLUDES)
 include $(BUILD_EXECUTABLE)
 
 ########################
-ifneq ($(BOARD_SUPPORT_BCM_WIFI),)
+ifeq ($(BOARD_HOSTAPD_PRIVATE_LIB_RTL),)
 
 include $(CLEAR_VARS)
 LOCAL_MODULE := hostapd
@@ -914,6 +914,9 @@ LOCAL_MODULE_TAGS := optional
 ifdef CONFIG_DRIVER_CUSTOM
 LOCAL_STATIC_LIBRARIES := libCustomWifi
 endif
+ifneq ($(BOARD_HOSTAPD_PRIVATE_LIB),)
+LOCAL_STATIC_LIBRARIES += $(BOARD_HOSTAPD_PRIVATE_LIB)
+endif
 ifneq ($(BOARD_HOSTAPD_PRIVATE_LIB_BCM),)
 LOCAL_STATIC_LIBRARIES += $(BOARD_HOSTAPD_PRIVATE_LIB_BCM)
 endif
diff --git a/external/wpa_supplicant_8/wpa_supplicant/Android.mk b/external/wpa_supplicant_8/wpa_supplicant/Android.mk
index fb6718b..fb00e44 100644
--- a/external/wpa_supplicant_8/wpa_supplicant/Android.mk
+++ b/external/wpa_supplicant_8/wpa_supplicant/Android.mk
@@ -28,7 +28,7 @@ L_CFLAGS += -DANDROID_LOG_NAME=\"wpa_supplicant\"
 L_CFLAGS += -Wno-unused-parameter
 
 # Set Android extended P2P functionality
-ifeq ($(BOARD_WLAN_DEVICE),$(filter $(BOARD_WLAN_DEVICE), qcwcn UNITE))
+ifeq ($(BOARD_WLAN_DEVICE),$(filter $(BOARD_WLAN_DEVICE), qcwcn UNITE wl12xx_mac80211))
 L_CFLAGS += -DANDROID_P2P
 endif
 
@@ -1555,15 +1555,20 @@ include $(BUILD_EXECUTABLE)
 
 ########################
 
-ifneq ($(BOARD_SUPPORT_BCM_WIFI),)
+ifeq ($(BOARD_WPA_SUPPLICANT_PRIVATE_LIB_RTL),)
 
 include $(CLEAR_VARS)
 LOCAL_MODULE := wpa_supplicant
 ifdef CONFIG_DRIVER_CUSTOM
 LOCAL_STATIC_LIBRARIES := libCustomWifi
 endif
+ifneq ($(BOARD_WPA_SUPPLICANT_PRIVATE_LIB),)
+LOCAL_STATIC_LIBRARIES += $(BOARD_WPA_SUPPLICANT_PRIVATE_LIB)
+endif
 ifneq ($(BOARD_WPA_SUPPLICANT_PRIVATE_LIB_BCM),)
 LOCAL_STATIC_LIBRARIES += $(BOARD_WPA_SUPPLICANT_PRIVATE_LIB_BCM)
+LOCAL_CFLAGS += -DFSL_WIFI_VENDOR
+LOCAL_CFLAGS += -DBROADCOM_WIFI_VENDOR
 endif
 LOCAL_SHARED_LIBRARIES := libc libcutils liblog
 ifdef CONFIG_EAP_PROXY
@@ -1581,8 +1586,6 @@ LOCAL_STATIC_LIBRARIES += libnl_2
 endif
 endif
 LOCAL_CFLAGS := $(L_CFLAGS)
-LOCAL_CFLAGS += -DFSL_WIFI_VENDOR
-LOCAL_CFLAGS += -DBROADCOM_WIFI_VENDOR
 LOCAL_SRC_FILES := $(OBJS)
 LOCAL_C_INCLUDES := $(INCLUDES)
 include $(BUILD_EXECUTABLE)
diff --git a/external/bluetooth/bluedroid/hci/src/vendor.c b/external/bluetooth/bluedroid/hci/src/vendor.c
index 6414eb1..64cfe1d 100644
--- a/external/bluetooth/bluedroid/hci/src/vendor.c
+++ b/external/bluetooth/bluedroid/hci/src/vendor.c
@@ -75,8 +75,8 @@ static const char *get_vendor_lib() {
         ALOGD("Select ar3k bt-vendor");
         return VENDOR_LIBRARY_NAME_AR3K;
     } else {
-        ALOGW("%s is %s and no mapped bt-vendor", VENDOR_LIB_PROP_NAME, prop);
-        return VENDOR_LIBRARY_NAME_BCM;
+        ALOGW("No mapped bt-vendor, selecting default %s", VENDOR_LIBRARY_NAME);
+        return VENDOR_LIBRARY_NAME;
     }
 
 }

