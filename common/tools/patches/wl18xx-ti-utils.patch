diff --git a/Android.mk b/Android.mk
index 25e3881..7e62533 100644
--- a/Android.mk
+++ b/Android.mk
@@ -19,12 +19,21 @@ LOCAL_SRC_FILES := \
 
 LOCAL_CFLAGS := -DCONFIG_LIBNL20
 LOCAL_C_INCLUDES := \
-    $(LOCAL_PATH) \
-    external/libnl-headers
+    $(LOCAL_PATH)
 
+ifneq ($(wildcard external/libnl),)
+LOCAL_C_INCLUDES += external/libnl/include
+else
+LOCAL_C_INCLUDES += external/libnl-headers
+endif
+
+ifneq ($(wildcard external/libnl),)
+LOCAL_SHARED_LIBRARIES += libnl
+else
 LOCAL_STATIC_LIBRARIES := libnl_2
+endif
 LOCAL_MODULE_TAGS := debug
-LOCAL_MODULE := calibrator
+LOCAL_MODULE := calibrator_18xx
 
 include $(BUILD_EXECUTABLE)
 
@@ -35,8 +44,13 @@ LOCAL_SRC_FILES := \
 	wl_logproxy.c
 
 LOCAL_C_INCLUDES := \
-	$(LOCAL_PATH) \
-	external/libnl-headers
+	$(LOCAL_PATH)
+
+ifneq ($(wildcard external/libnl),)
+LOCAL_C_INCLUDES += external/libnl/include
+else
+LOCAL_C_INCLUDES += external/libnl-headers
+endif
 
 LOCAL_NO_DEFAULT_COMPILER_FLAGS := true
 LOCAL_C_INCLUDES += $(LOCAL_PATH)/../libnl-headers \
@@ -48,8 +62,11 @@ LOCAL_CFLAGS += -DCONFIG_LIBNL20=y
 LOCAL_MODULE := wl_logproxy
 LOCAL_LDFLAGS := -Wl,--no-gc-sections
 LOCAL_MODULE_TAGS := debug
-#LOCAL_SHARED_LIBRARIES := libnl
+ifneq ($(wildcard external/libnl),)
+LOCAL_SHARED_LIBRARIES += libnl
+else
 LOCAL_STATIC_LIBRARIES := libnl_2
+endif
 LOCAL_MODULE := wl_logproxy
 
 include $(BUILD_EXECUTABLE)
diff --git a/asi/Android.mk b/asi/Android.mk
index f446ff2..99823f8 100755
--- a/asi/Android.mk
+++ b/asi/Android.mk
@@ -13,10 +13,22 @@ LOCAL_SRC_FILES := \
 
 LOCAL_C_INCLUDES := \
 	$(LOCAL_PATH) \
-	$(LOCAL_PATH)/../ \
-	external/libnl-headers
+	$(LOCAL_PATH)/../
+
+ifneq ($(wildcard external/libnl),)
+LOCAL_C_INCLUDES += external/libnl/include
+else
+LOCAL_C_INCLUDES += external/libnl-headers
+endif
+
 LOCAL_CFLAGS += -DCONFIG_LIBNL20
 LOCAL_MODULE_TAGS := debug
+
+ifneq ($(wildcard external/libnl),)
+LOCAL_SHARED_LIBRARIES += libnl
+else
 LOCAL_STATIC_LIBRARIES := libnl_2
+endif
+
 LOCAL_MODULE := asi
-include $(BUILD_EXECUTABLE)
\ No newline at end of file
+include $(BUILD_EXECUTABLE)
diff --git a/wlconf/main.c b/wlconf/main.c
index 6a4d8ae..6a630fd 100644
--- a/wlconf/main.c
+++ b/wlconf/main.c
@@ -28,7 +28,7 @@
 #include "crc32.h"
 #include "wlconf.h"
 
-#ifdef ANDROID
+#ifdef ANDROID_BUGGY
 static ssize_t getline(char **lineptr, size_t *n, FILE *stream)
 {
 	char *lptr;
diff -uNr a/wlconf/official_inis/Android.mk b/wlconf/official_inis/Android.mk
--- a/wlconf/official_inis/Android.mk	1970-01-01 01:00:00.000000000 +0100
+++ b/wlconf/official_inis/Android.mk	2016-01-31 18:54:30.969427669 +0100
@@ -0,0 +1,53 @@
+LOCAL_PATH:= $(call my-dir)
+
+# Copy ini files
+
+etc_target_dir := $(TARGET_OUT)/etc/wifi/wlconf/official_inis
+
+include $(CLEAR_VARS)
+LOCAL_SRC_FILES := WL1835MOD_INI_C2PC.ini
+LOCAL_MODULE_TAGS := debug
+LOCAL_MODULE_CLASS := ETC
+LOCAL_MODULE_PATH := $(etc_target_dir)
+LOCAL_MODULE := $(LOCAL_SRC_FILES)
+include $(BUILD_PREBUILT)
+
+include $(CLEAR_VARS)
+LOCAL_SRC_FILES := WL1835MOD_INI.ini
+LOCAL_MODULE_TAGS := debug
+LOCAL_MODULE_CLASS := ETC
+LOCAL_MODULE_PATH := $(etc_target_dir)
+LOCAL_MODULE := $(LOCAL_SRC_FILES)
+include $(BUILD_PREBUILT)
+
+include $(CLEAR_VARS)
+LOCAL_SRC_FILES := WL1837MOD_INI_FCC_CE.ini
+LOCAL_MODULE_TAGS := debug
+LOCAL_MODULE_CLASS := ETC
+LOCAL_MODULE_PATH := $(etc_target_dir)
+LOCAL_MODULE := $(LOCAL_SRC_FILES)
+include $(BUILD_PREBUILT)
+
+include $(CLEAR_VARS)
+LOCAL_SRC_FILES := WL1837MOD_INI_FCC_CE_JP.ini
+LOCAL_MODULE_TAGS := debug
+LOCAL_MODULE_CLASS := ETC
+LOCAL_MODULE_PATH := $(etc_target_dir)
+LOCAL_MODULE := $(LOCAL_SRC_FILES)
+include $(BUILD_PREBUILT)
+
+include $(CLEAR_VARS)
+LOCAL_SRC_FILES := WL8_COB_INI.ini
+LOCAL_MODULE_TAGS := debug
+LOCAL_MODULE_CLASS := ETC
+LOCAL_MODULE_PATH := $(etc_target_dir)
+LOCAL_MODULE := $(LOCAL_SRC_FILES)
+include $(BUILD_PREBUILT)
+
+include $(CLEAR_VARS)
+LOCAL_SRC_FILES := WL8_TESTING_INI.ini
+LOCAL_MODULE_TAGS := debug
+LOCAL_MODULE_CLASS := ETC
+LOCAL_MODULE_PATH := $(etc_target_dir)
+LOCAL_MODULE := $(LOCAL_SRC_FILES)
+include $(BUILD_PREBUILT)
